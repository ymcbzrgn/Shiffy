<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiftlerim - Shiffy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        * {
            font-family: 'Manrope', sans-serif;
        }
        
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out;
        }

        .shift-card {
            background: white;
            border-radius: 1rem;
            padding: 1.25rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.2s;
            border-left: 4px solid;
        }

        .shift-card:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .dark .shift-card {
            background: #1a2a33;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark .shift-card:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
        }

        .shift-approved {
            border-left-color: #078836;
        }

        .shift-pending {
            border-left-color: #F0AD4E;
        }

        .shift-upcoming {
            border-left-color: #1193d4;
        }

        .shift-past {
            border-left-color: #617c89;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.2s;
            cursor: pointer;
        }

        .tab-active {
            background: linear-gradient(135deg, #1193d4 0%, #0d7ab8 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(17, 147, 212, 0.3);
        }

        .tab-inactive {
            background: transparent;
            color: #617c89;
        }

        .dark .tab-inactive {
            color: #a0b8c4;
        }

        .tab-inactive:hover {
            background: rgba(17, 147, 212, 0.1);
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-day:hover {
            background: rgba(17, 147, 212, 0.1);
        }

        .calendar-day-selected {
            background: linear-gradient(135deg, #1193d4 0%, #0d7ab8 100%);
            color: white;
        }

        .calendar-day-has-shift {
            position: relative;
        }

        .calendar-day-has-shift::after {
            content: '';
            position: absolute;
            bottom: 4px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #078836;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 1.5rem;
        }
    </style>
</head>
<body class="bg-[#f6f7f8] dark:bg-[#101c22] min-h-screen">
    <!-- Header -->
    <div class="bg-gradient-to-r from-[#1193d4] to-[#0d7ab8] text-white p-6 shadow-lg">
        <div class="flex items-center justify-between max-w-md mx-auto">
            <h1 class="text-2xl font-bold">Shiftlerim</h1>
            <div class="flex items-center space-x-2">
                <button onclick="toggleView()" class="p-2 hover:bg-white/10 rounded-lg transition-colors">
                    <span class="material-symbols-outlined" id="viewIcon">calendar_view_month</span>
                </button>
                <button onclick="toggleTheme()" class="p-2 hover:bg-white/10 rounded-lg transition-colors">
                    <span class="material-symbols-outlined" id="themeIcon">dark_mode</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-md mx-auto px-4 py-6 pb-24">
        <!-- Tabs -->
        <div class="flex space-x-2 mb-6 bg-white dark:bg-[#1a2a33] p-1.5 rounded-xl shadow-md">
            <button onclick="switchTab('upcoming')" id="tab-upcoming" class="flex-1 tab-button tab-active">
                Yaklaşan
            </button>
            <button onclick="switchTab('past')" id="tab-past" class="flex-1 tab-button tab-inactive">
                Geçmiş
            </button>
            <button onclick="switchTab('all')" id="tab-all" class="flex-1 tab-button tab-inactive">
                Tümü
            </button>
        </div>

        <!-- Calendar View (Hidden by default) -->
        <div id="calendarView" class="hidden mb-6">
            <div class="bg-white dark:bg-[#1a2a33] rounded-xl p-4 shadow-md">
                <!-- Month Navigation -->
                <div class="flex items-center justify-between mb-4">
                    <button onclick="previousMonth()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
                        <span class="material-symbols-outlined text-[#1193d4]">chevron_left</span>
                    </button>
                    <h3 id="currentMonth" class="text-lg font-bold text-[#111618] dark:text-[#f0f3f4]">Ocak 2025</h3>
                    <button onclick="nextMonth()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
                        <span class="material-symbols-outlined text-[#1193d4]">chevron_right</span>
                    </button>
                </div>

                <!-- Calendar Grid -->
                <div class="grid grid-cols-7 gap-1">
                    <!-- Day Headers -->
                    <div class="text-center text-xs font-semibold text-[#617c89] dark:text-[#a0b8c4] py-2">Pzt</div>
                    <div class="text-center text-xs font-semibold text-[#617c89] dark:text-[#a0b8c4] py-2">Sal</div>
                    <div class="text-center text-xs font-semibold text-[#617c89] dark:text-[#a0b8c4] py-2">Çar</div>
                    <div class="text-center text-xs font-semibold text-[#617c89] dark:text-[#a0b8c4] py-2">Per</div>
                    <div class="text-center text-xs font-semibold text-[#617c89] dark:text-[#a0b8c4] py-2">Cum</div>
                    <div class="text-center text-xs font-semibold text-[#617c89] dark:text-[#a0b8c4] py-2">Cmt</div>
                    <div class="text-center text-xs font-semibold text-[#D9534F] dark:text-[#D9534F] py-2">Paz</div>
                    
                    <!-- Calendar Days (will be populated by JavaScript) -->
                    <div id="calendarDays" class="col-span-7 grid grid-cols-7 gap-1"></div>
                </div>
            </div>
        </div>

        <!-- Shifts List -->
        <div id="shiftsList" class="space-y-4">
            <!-- Loading State -->
            <div id="loadingState" class="hidden text-center py-12">
                <svg class="animate-spin h-10 w-10 text-[#1193d4] mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="text-[#617c89] dark:text-[#a0b8c4]">Shiftler yükleniyor...</p>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="hidden empty-state">
                <div class="w-24 h-24 bg-gradient-to-br from-[#1193d4] to-[#0d7ab8] rounded-full flex items-center justify-center mx-auto mb-4 opacity-20">
                    <span class="material-symbols-outlined text-white text-5xl">event_busy</span>
                </div>
                <h3 class="text-xl font-bold text-[#111618] dark:text-[#f0f3f4] mb-2">Shift Bulunamadı</h3>
                <p class="text-[#617c89] dark:text-[#a0b8c4]">Bu kategoride henüz shift bulunmuyor.</p>
            </div>

            <!-- Shift Cards will be inserted here -->
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="fixed bottom-0 left-0 right-0 bg-white dark:bg-[#1a2a33] shadow-2xl border-t border-gray-200 dark:border-gray-700 z-50">
        <div class="max-w-md mx-auto flex items-center justify-around py-3 px-4">
            <button onclick="navigateToHome()" class="flex flex-col items-center space-y-1 p-2 transition-colors">
                <span class="material-symbols-outlined text-[#617c89] dark:text-[#a0b8c4]">home</span>
                <span class="text-xs text-[#617c89] dark:text-[#a0b8c4]">Ana Sayfa</span>
            </button>
            
            <button class="flex flex-col items-center space-y-1 p-2 transition-colors">
                <span class="material-symbols-outlined text-[#1193d4]" style="font-variation-settings: 'FILL' 1">calendar_month</span>
                <span class="text-xs text-[#1193d4] font-semibold">Shiftlerim</span>
            </button>
            
            <button onclick="navigateToProfile()" class="flex flex-col items-center space-y-1 p-2 transition-colors">
                <span class="material-symbols-outlined text-[#617c89] dark:text-[#a0b8c4]">person</span>
                <span class="text-xs text-[#617c89] dark:text-[#a0b8c4]">Profilim</span>
            </button>
        </div>
    </div>

    <script>
        // Sample shift data
        const shifts = [
            {
                id: 1,
                date: '2025-01-28',
                dayName: 'Salı',
                startTime: '09:00',
                endTime: '17:00',
                duration: '8 saat',
                status: 'approved',
                statusText: 'Onaylandı',
                location: 'Starbucks Şişli'
            },
            {
                id: 2,
                date: '2025-01-30',
                dayName: 'Perşembe',
                startTime: '14:00',
                endTime: '22:00',
                duration: '8 saat',
                status: 'approved',
                statusText: 'Onaylandı',
                location: 'Starbucks Şişli'
            },
            {
                id: 3,
                date: '2025-02-01',
                dayName: 'Cumartesi',
                startTime: '10:00',
                endTime: '18:00',
                duration: '8 saat',
                status: 'pending',
                statusText: 'Beklemede',
                location: 'Starbucks Şişli'
            },
            {
                id: 4,
                date: '2025-01-25',
                dayName: 'Cumartesi',
                startTime: '09:00',
                endTime: '17:00',
                duration: '8 saat',
                status: 'past',
                statusText: 'Tamamlandı',
                location: 'Starbucks Şişli'
            },
            {
                id: 5,
                date: '2025-01-22',
                dayName: 'Çarşamba',
                startTime: '14:00',
                endTime: '22:00',
                duration: '8 saat',
                status: 'past',
                statusText: 'Tamamlandı',
                location: 'Starbucks Şişli'
            }
        ];

        let currentTab = 'upcoming';
        let currentView = 'list'; // 'list' or 'calendar'
        let currentMonth = new Date();

        // Theme Management
        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            document.getElementById('themeIcon').textContent = isDark ? 'light_mode' : 'dark_mode';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        if (localStorage.getItem('theme') === 'dark') {
            document.documentElement.classList.add('dark');
            document.getElementById('themeIcon').textContent = 'light_mode';
        }

        // View Toggle
        function toggleView() {
            currentView = currentView === 'list' ? 'calendar' : 'list';
            const calendarView = document.getElementById('calendarView');
            const viewIcon = document.getElementById('viewIcon');
            
            if (currentView === 'calendar') {
                calendarView.classList.remove('hidden');
                viewIcon.textContent = 'view_list';
                renderCalendar();
            } else {
                calendarView.classList.add('hidden');
                viewIcon.textContent = 'calendar_view_month';
            }
        }

        // Tab Switching
        function switchTab(tab) {
            currentTab = tab;
            
            // Update tab buttons
            ['upcoming', 'past', 'all'].forEach(t => {
                const btn = document.getElementById(`tab-${t}`);
                if (t === tab) {
                    btn.classList.remove('tab-inactive');
                    btn.classList.add('tab-active');
                } else {
                    btn.classList.remove('tab-active');
                    btn.classList.add('tab-inactive');
                }
            });
            
            renderShifts();
        }

        // Render Shifts
        function renderShifts() {
            const shiftsList = document.getElementById('shiftsList');
            const emptyState = document.getElementById('emptyState');
            
            // Clear existing shifts (except loading/empty states)
            const existingCards = shiftsList.querySelectorAll('.shift-card');
            existingCards.forEach(card => card.remove());
            
            // Filter shifts based on tab
            let filteredShifts = [];
            const today = new Date().toISOString().split('T')[0];
            
            if (currentTab === 'upcoming') {
                filteredShifts = shifts.filter(s => s.date >= today);
            } else if (currentTab === 'past') {
                filteredShifts = shifts.filter(s => s.date < today);
            } else {
                filteredShifts = shifts;
            }
            
            // Sort by date
            filteredShifts.sort((a, b) => {
                if (currentTab === 'past') {
                    return new Date(b.date) - new Date(a.date); // Descending for past
                }
                return new Date(a.date) - new Date(b.date); // Ascending for upcoming/all
            });
            
            if (filteredShifts.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            filteredShifts.forEach((shift, index) => {
                const card = createShiftCard(shift);
                card.style.animationDelay = `${index * 50}ms`;
                shiftsList.appendChild(card);
            });
        }

        // Create Shift Card
        function createShiftCard(shift) {
            const card = document.createElement('div');
            card.className = `shift-card shift-${shift.status === 'past' ? 'past' : shift.status} animate-fadeIn`;
            
            const statusColors = {
                approved: { bg: 'bg-[#078836]/10 dark:bg-[#078836]/20', text: 'text-[#078836]' },
                pending: { bg: 'bg-[#F0AD4E]/10 dark:bg-[#F0AD4E]/20', text: 'text-[#F0AD4E]' },
                past: { bg: 'bg-[#617c89]/10 dark:bg-[#617c89]/20', text: 'text-[#617c89] dark:text-[#a0b8c4]' }
            };
            
            const color = statusColors[shift.status === 'past' ? 'past' : shift.status];
            
            card.innerHTML = `
                <div class="flex items-start justify-between mb-3">
                    <div>
                        <h3 class="text-lg font-bold text-[#111618] dark:text-[#f0f3f4]">${shift.dayName}</h3>
                        <p class="text-sm text-[#617c89] dark:text-[#a0b8c4]">${formatDate(shift.date)}</p>
                    </div>
                    <div class="${color.bg} px-3 py-1.5 rounded-lg">
                        <span class="${color.text} text-xs font-semibold">${shift.statusText}</span>
                    </div>
                </div>
                
                <div class="space-y-2">
                    <div class="flex items-center space-x-2 text-[#617c89] dark:text-[#a0b8c4]">
                        <span class="material-symbols-outlined text-[#1193d4]">schedule</span>
                        <span class="text-sm font-medium">${shift.startTime} - ${shift.endTime} (${shift.duration})</span>
                    </div>
                    
                    <div class="flex items-center space-x-2 text-[#617c89] dark:text-[#a0b8c4]">
                        <span class="material-symbols-outlined text-[#1193d4]">location_on</span>
                        <span class="text-sm font-medium">${shift.location}</span>
                    </div>
                </div>
                
                ${shift.status === 'approved' ? `
                    <button onclick="viewShiftDetails(${shift.id})" class="mt-4 w-full bg-gradient-to-r from-[#1193d4] to-[#0d7ab8] text-white py-2.5 rounded-lg font-semibold text-sm hover:shadow-lg transition-all">
                        Detayları Gör
                    </button>
                ` : ''}
            `;
            
            return card;
        }

        // Format Date
        function formatDate(dateString) {
            const date = new Date(dateString);
            const day = date.getDate();
            const months = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'];
            const month = months[date.getMonth()];
            const year = date.getFullYear();
            return `${day} ${month} ${year}`;
        }

        // Calendar Functions
        function renderCalendar() {
            const calendarDays = document.getElementById('calendarDays');
            const currentMonthEl = document.getElementById('currentMonth');
            
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            const months = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'];
            currentMonthEl.textContent = `${months[month]} ${year}`;
            
            // Clear calendar
            calendarDays.innerHTML = '';
            
            // Get first day of month (0 = Sunday, 1 = Monday, etc.)
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Adjust first day (make Monday = 0)
            const adjustedFirstDay = firstDay === 0 ? 6 : firstDay - 1;
            
            // Add empty cells for days before month starts
            for (let i = 0; i < adjustedFirstDay; i++) {
                calendarDays.innerHTML += '<div></div>';
            }
            
            // Add days
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const hasShift = shifts.some(s => s.date === dateStr);
                const isToday = dateStr === new Date().toISOString().split('T')[0];
                
                calendarDays.innerHTML += `
                    <div class="calendar-day ${hasShift ? 'calendar-day-has-shift' : ''} ${isToday ? 'border-2 border-[#1193d4]' : ''} text-[#111618] dark:text-[#f0f3f4]" onclick="selectCalendarDay('${dateStr}')">
                        <span class="text-sm font-medium">${day}</span>
                    </div>
                `;
            }
        }

        function previousMonth() {
            currentMonth.setMonth(currentMonth.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentMonth.setMonth(currentMonth.getMonth() + 1);
            renderCalendar();
        }

        function selectCalendarDay(dateStr) {
            const shift = shifts.find(s => s.date === dateStr);
            if (shift) {
                alert(`${shift.dayName}, ${shift.date}\n${shift.startTime} - ${shift.endTime}\n${shift.statusText}`);
            }
        }

        // Navigation
        function navigateToHome() {
            window.location.href = '../calisan_ana_ekran/calisan_ana_ekran.html';
        }

        function navigateToProfile() {
            window.location.href = '../calisan_profili/calisan_profili.html';
        }

        function viewShiftDetails(shiftId) {
            alert(`Shift detayları sayfası yakında aktif olacak (Shift ID: ${shiftId})`);
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            renderShifts();
        });
    </script>
</body>
</html>